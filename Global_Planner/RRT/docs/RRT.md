# RRT 算法

## 算法简介
RRT （快速随机搜索树）是一种增量式采样的搜索方法，用于路径规划时不需要任何参数整定，也不需要事先对环境信息进行处理和存储，具有良好的适应性，适合解决复杂环境以及多种约束条件的路径规划问题。 

- 优点：
1. 不需要启发式函数
2. RRT 的快速迭代生长方式决定了其在高维非凸空间的搜索优势。

- 缺点：
1. 稳定性不佳，且消耗内存较大。
2. 不适合于动态环境规划与避障
3. 路径曲折冗余点较多


## 算法原理
RRT 算法可以分为两个阶段：采样阶段 和 回溯阶段
1. 采样阶段：
   1. 初始化：创建一个只包含起点的树。
   
   2. 随机采样：在配置空间中随机生成一个采样点 Prand，通常是目标点或者一些离散的点，这个点用于确定树拓展的方向。
      1. 有一定概率直接将目标点作为采样点（向目标点延伸）
      2. 有一定概率随机生成一个采样点（向随机方向延伸）
   
   3. 树拓展 ：从节点树中找出离采样点 Prand 最近的一个子节点 Pnear，以点 Pnear 为端点，沿着 Pnear——Prand 方向扩展一定的步长 𝜌，将另一端点记为 Pnew，这个扩展过程涉及计算碰撞检测，以确保路径不会与障碍物相交。如果路径是合法的，就将新的节点 Pnew 添加到树中。
   
      ![image-20240106202208818](../assets/RRT.assets/image-20240106202208818.png)
   
   4. 不断重复随机采样和树扩展步骤，直到达到一定条件，比如找到一条可行路径或达到最大迭代次数。

2. 回溯阶段
   如果在树的扩展过程中找到了一条从起点到目标点的路径，就可以通过回溯树中的节点来提取这条路径，即从离 Pgoal 最近的一个子节点 Pnew 依次向上搜索父节点，直到初始点 Pinit


## 预设参数

1. 随机采样概率: 在采样时选择随机采样点而不是选择目标点作为采样点的概率.

   > 概率越大, 树的分支越多, 搜索更全面, 但是显得没有方向性, 耗时较大.

   设随机采样的概率为1.0，采样上限20000次。可以看到，虽然规划得以成功，但由于生长缺乏方向性，其实是一种“碰运气”式的搜索。RRT树的分支填充了所有空间直至找到目标点。这样的搜索会消耗大量的时间。


2. 生长步长 (每次延伸的长度)

   >  空间越复杂, 一般来说步长应该越小, 速度也就越慢

3. 采样上限(最大采样次数)


参考资料：
https://blog.csdn.net/dgvv4/article/details/128077188